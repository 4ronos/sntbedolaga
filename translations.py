TRANSLATIONS = {
    'ru': {
        # Language selection
        'select_language': 'üåç –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Choose language',
        'language_selected': 'üá∑üá∫ –Ø–∑—ã–∫ –≤—ã–±—Ä–∞–Ω: –†—É—Å—Å–∫–∏–π',
        
        # Main menu
        'main_menu': 'üì± –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é',
        'balance': '–ë–∞–ª–∞–Ω—Å',
        'my_subscriptions': '–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏',
        'buy_subscription': '–ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É',
        'support': '–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞',
        'promocode': '–ü—Ä–æ–º–æ–∫–æ–¥',
        'admin_panel': '–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å',
        'trial_subscription': 'üÜì –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞',
        'trial_not_available': '‚ùå –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞',
        'trial_success': 'üéâ –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!\n\n–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –µ—ë –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏".',
        'trial_error': '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏',
        'trial_info': 'üß™ –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –≤—ã–¥–∞–µ—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –¥–Ω—è!\n\n–¢–∞—Ä–∏—Ñ –¥–µ–π—Å—Ç–≤—É–µ—Ç 3 –¥–Ω—è!\n\n–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ - 2–≥–±!',
        
        # Balance menu
        'your_balance': 'üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: {balance:.2f} —Ä—É–±.',
        'topup_balance': '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å',
        'payment_history': '–ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π',
        'topup_card': '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–π',
        'topup_support': '–ß–µ—Ä–µ–∑ —Å–∞–ø–ø–æ—Ä—Ç',
        'back': '–ù–∞–∑–∞–¥',

        'send_message': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',
        'send_to_user': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é',
        'send_to_all': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º',
        'enter_message_text': '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:',
        'enter_user_id_message': '–í–≤–µ–¥–∏—Ç–µ Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
        'message_sent': '‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',
        'broadcast_sent': '‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞',
        'broadcast_stats': '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {sent}, –û—à–∏–±–æ–∫: {errors}',
        'change_language': '–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫',
        'language_changed': '‚úÖ –Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω',
        'extend_subscription': '–ü—Ä–æ–¥–ª–∏—Ç—å',
        'subscription_extended': '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∞',
        'extend_confirmation': '–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É "{name}" –Ω–∞ {days} –¥–Ω–µ–π –∑–∞ {price:.2f} —Ä—É–±.?',
        'subscription_expires_soon': '–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ {days} –¥–Ω–µ–π',
        
        # Subscriptions
        'no_subscriptions': '‚ùå –£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫',
        'subscription_info': 'üìã –ü–æ–¥–ø–∏—Å–∫–∞: {name}\nüí∞ –¶–µ–Ω–∞: {price:.2f} —Ä—É–±.\n‚è± –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {days} –¥–Ω–µ–π\nüìä –¢—Ä–∞—Ñ–∏–∫: {traffic}\n\n{description}',
        'unlimited_traffic': '–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π',
        'gb_traffic': '{gb} –ì–ë',
        'buy_subscription_btn': 'üõí –ö—É–ø–∏—Ç—å –∑–∞ {price:.2f} —Ä—É–±.',
        'get_connection': 'üîó –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ',
        'subscription_expires': '–ò—Å—Ç–µ–∫–∞–µ—Ç: {date}',
        'subscription_expired': '–ò—Å—Ç–µ–∫–ª–∞',
        'subscription_active': '–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ: {date}',
        
        # Payments
        'payment_created': '‚úÖ –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∞.\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ @{support} –¥–ª—è –æ–ø–ª–∞—Ç—ã.',
        'enter_amount': 'üí∞ –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (—Ä—É–±.):',
        'invalid_amount': '‚ùå –ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞',
        'payment_card_info': 'üí≥ –î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç–æ–π —Å–≤—è–∂–∏—Ç–µ—Å—å —Å @{support}',
        'no_payments': '‚ùå –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –ø—É—Å—Ç–∞',
        'payment_item': '{date}: {amount:.2f} —Ä—É–±. - {description} ({status})',
        
        # Promocodes
        'enter_promocode': 'üéÅ –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥:',
        'promocode_success': '‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –°–∫–∏–¥–∫–∞: {discount}',
        'promocode_not_found': '‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω',
        'promocode_expired': '‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –∏—Å—Ç–µ–∫',
        'promocode_used': '‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω',
        'promocode_limit': '‚ùå –õ–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π –∏—Å—á–µ—Ä–ø–∞–Ω',
        
        # Purchase
        'insufficient_balance': '‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ',
        'subscription_purchased': '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∞!',
        'purchase_error': '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏',
        
        # Support
        'support_message': 'üéß –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ @{support}',
        
        # Admin panel
        'admin_menu': '‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å',
        'manage_subscriptions': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏',
        'manage_users': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏',
        'manage_balance': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º',
        'manage_promocodes': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏',
        'statistics': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
        'not_admin': '‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞',
        
        # Admin - subscriptions
        'create_subscription': '–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É',
        'enter_sub_name': '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:',
        'enter_sub_description': '–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:',
        'enter_sub_price': '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –ø–æ–¥–ø–∏—Å–∫–∏ (—Ä—É–±.):',
        'enter_sub_days': '–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–µ–π):',
        'enter_sub_traffic': '–í–≤–µ–¥–∏—Ç–µ –ª–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ (–ì–ë, 0 –¥–ª—è –±–µ–∑–ª–∏–º–∏—Ç–∞):',
        'enter_squad_uuid': '–í–≤–µ–¥–∏—Ç–µ UUID squad –∏–∑ –ø–∞–Ω–µ–ª–∏:',
        'subscription_created': '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞',
        
        # Admin - users
        'user_list': '–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:',
        'user_item': 'ID: {id}, @{username}, –ë–∞–ª–∞–Ω—Å: {balance:.2f} —Ä—É–±.',
        'enter_user_id': '–í–≤–µ–¥–∏—Ç–µ Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
        'enter_balance_amount': '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:',
        'balance_added': '‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω',
        'user_not_found': '‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω',
        
        # Admin - promocodes
        'create_promocode': '–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥',
        'enter_promo_code': '–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞:',
        'enter_promo_discount': '–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏ (—Ä—É–±.):',
        'enter_promo_limit': '–í–≤–µ–¥–∏—Ç–µ –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π:',
        'promocode_created': '‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ —Å–æ–∑–¥–∞–Ω',
        'promocode_exists': '‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç',
        
        # Statistics
        'stats_info': 'üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\nüë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {users}\nüìã –ü–æ–¥–ø–∏—Å–æ–∫: {subscriptions}\nüí∞ –í—ã—Ä—É—á–∫–∞: {revenue:.2f} —Ä—É–±.',
        
        # Errors
        'error_occurred': '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞',
        'try_again': '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑',
        'invalid_input': '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥',
        'cancel': '–û—Ç–º–µ–Ω–∞',
        
        # Connection
        'connection_link': 'üîó –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:\n\n`{link}`\n\n–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å',
        'connection_error': '‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è',
    },
    
    'en': {
        # Language selection
        'select_language': 'üåç Choose language / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫',
        'language_selected': 'üá∫üá∏ Language selected: English',
        
        # Main menu
        'main_menu': 'üì± Main Menu',
        'balance': 'Balance',
        'my_subscriptions': 'My Subscriptions',
        'buy_subscription': 'Buy Subscription',
        'support': 'Support',
        'promocode': 'Promocode',
        'admin_panel': 'Admin Panel',
        'change_language': 'Change Language',
        'send_message': 'Send messsage',
        'send_to_user': 'Send to user',
        'send_to_all': 'Send to all',
        'enter_user_id_message': 'Enter user id message',
        'enter_message_text': 'Enter message text',
        'trial_subscription': 'Trial subscription',

        
        # Balance menu
        'your_balance': 'üí∞ Your balance: ${balance:.2f}',
        'topup_balance': 'Top up balance',
        'payment_history': 'Payment history',
        'topup_card': 'Card payment',
        'topup_support': 'Through support',
        'back': 'Back',
        
        # Subscriptions
        'no_subscriptions': '‚ùå You have no active subscriptions',
        'subscription_info': 'üìã Subscription: {name}\nüí∞ Price: ${price:.2f}\n‚è± Duration: {days} days\nüìä Traffic: {traffic}\n\n{description}',
        'unlimited_traffic': 'Unlimited',
        'gb_traffic': '{gb} GB',
        'buy_subscription_btn': 'üõí Buy for ${price:.2f}',
        'get_connection': 'üîó Get connection',
        'subscription_expires': 'Expires: {date}',
        'subscription_expired': 'Expired',
        'subscription_active': 'Active until: {date}',
        
        # Payments
        'payment_created': '‚úÖ Top-up request created.\nContact @{support} for payment.',
        'enter_amount': 'üí∞ Enter amount to top up ($):',
        'invalid_amount': '‚ùå Invalid amount',
        'payment_card_info': 'üí≥ For card payment contact @{support}',
        'no_payments': '‚ùå Payment history is empty',
        'payment_item': '{date}: ${amount:.2f} - {description} ({status})',
        
        # Promocodes
        'enter_promocode': 'üéÅ Enter promocode:',
        'promocode_success': '‚úÖ Promocode activated! Discount: {discount}',
        'promocode_not_found': '‚ùå Promocode not found',
        'promocode_expired': '‚ùå Promocode expired',
        'promocode_used': '‚ùå Promocode already used',
        'promocode_limit': '‚ùå Usage limit reached',
        
        # Purchase
        'insufficient_balance': '‚ùå Insufficient balance',
        'subscription_purchased': '‚úÖ Subscription purchased successfully!',
        'purchase_error': '‚ùå Error purchasing subscription',
        
        # Support
        'support_message': 'üéß For support contact @{support}',
        
        # Admin panel
        'admin_menu': '‚öôÔ∏è Admin Panel',
        'manage_subscriptions': 'Manage Subscriptions',
        'manage_users': 'Manage Users',
        'manage_balance': 'Manage Balance',
        'manage_promocodes': 'Manage Promocodes',
        'statistics': 'Statistics',
        'not_admin': '‚ùå You don\'t have admin rights',
        
        # Admin - subscriptions
        'create_subscription': 'Create Subscription',
        'enter_sub_name': 'Enter subscription name:',
        'enter_sub_description': 'Enter subscription description:',
        'enter_sub_price': 'Enter subscription price ($):',
        'enter_sub_days': 'Enter duration (days):',
        'enter_sub_traffic': 'Enter traffic limit (GB, 0 for unlimited):',
        'enter_squad_uuid': 'Enter squad UUID from panel:',
        'subscription_created': '‚úÖ Subscription created',
        
        # Admin - users
        'user_list': 'üë• User list:',
        'user_item': 'ID: {id}, @{username}, Balance: ${balance:.2f}',
        'enter_user_id': 'Enter user Telegram ID:',
        'enter_balance_amount': 'Enter amount to add:',
        'balance_added': '‚úÖ Balance added',
        'user_not_found': '‚ùå User not found',
        
        # Admin - promocodes
        'create_promocode': 'Create Promocode',
        'enter_promo_code': 'Enter promocode:',
        'enter_promo_discount': 'Enter discount amount ($):',
        'enter_promo_limit': 'Enter usage limit:',
        'promocode_created': '‚úÖ Promocode created',
        'promocode_exists': '‚ùå Promocode already exists',
        
        # Statistics
        'stats_info': 'üìä Statistics:\nüë• Users: {users}\nüìã Subscriptions: {subscriptions}\nüí∞ Revenue: ${revenue:.2f}',
        
        # Errors
        'error_occurred': '‚ùå An error occurred',
        'try_again': 'Try again',
        'invalid_input': '‚ùå Invalid input',
        'cancel': 'Cancel',
        
        # Connection
        'connection_link': 'üîó Connection link:\n\n`{link}`\n\nClick the link to copy',
        'connection_error': '‚ùå Error getting connection link',
    }
}

def t(key: str, lang: str = 'ru', **kwargs) -> str:
    """Get translation for key with optional formatting"""
    translation = TRANSLATIONS.get(lang, TRANSLATIONS['ru']).get(key, key)
    if kwargs:
        try:
            return translation.format(**kwargs)
        except KeyError:
            return translation
    return translation
